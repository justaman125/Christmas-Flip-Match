<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Christmas Flip & Match</title>

<style>
* {
  box-sizing: border-box;
  font-family: "Segoe UI", sans-serif;
}

body {
  margin: 0;
  min-height: 100vh;
  background: radial-gradient(circle at top, #1b5e20, #0d2818);
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

/* Snow */
.snow::before {
  content: "â„ â… â† â„ â… â†";
  position: absolute;
  top: -10%;
  left: 0;
  width: 100%;
  font-size: 2rem;
  opacity: 0.25;
  animation: snow 14s linear infinite;
}

@keyframes snow {
  to { transform: translateY(120vh); }
}

.game-container {
  background: rgba(0,0,0,0.45);
  padding: 25px 35px;
  border-radius: 22px;
  box-shadow: 0 0 35px rgba(255,0,0,0.35);
  text-align: center;
  z-index: 1;
}

h1 {
  margin: 0;
  color: #ffeb3b;
  text-shadow: 0 0 12px red;
}

.scoreboard {
  display: flex;
  gap: 10px;
  margin: 20px 0;
}

.player {
  flex: 1;
  padding: 10px;
  border-radius: 14px;
  background: rgba(255,255,255,0.15);
}

.player.active {
  background: rgba(255,0,0,0.65);
  box-shadow: 0 0 15px #ff5252;
}

.grid {
  display: grid;
  grid-template-columns: repeat(4, 90px);
  gap: 15px;
  justify-content: center;
  margin: 20px 0;
}

.card {
  width: 90px;
  height: 110px;
  perspective: 800px;
  cursor: pointer;
}

.card-inner {
  width: 100%;
  height: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
  position: relative;
}

.card.flip .card-inner {
  transform: rotateY(180deg);
}

.card-face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.6rem;
}

.card-front {
  background: linear-gradient(145deg,#c62828,#8e0000);
}

.card-back {
  background: linear-gradient(145deg,#2e7d32,#1b5e20);
  transform: rotateY(180deg);
}

button {
  padding: 10px 22px;
  border-radius: 14px;
  border: none;
  background: #ff5252;
  color: white;
  cursor: pointer;
  box-shadow: 0 0 12px red;
}

button:hover {
  background: #ff1744;
}

/* Winner Screen */
.winner-screen {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: flex;
  justify-content: center;
  align-items: center;
}

.hidden { display: none; }

.winner-box {
  background: #1b5e20;
  padding: 35px;
  border-radius: 22px;
  box-shadow: 0 0 35px gold;
  text-align: center;
  min-width: 280px;
}

.podium {
  margin: 20px 0;
}

.rank {
  opacity: 0;
  transform: translateY(20px) scale(0.9);
  transition: all 0.6s ease;
  margin: 8px 0;
  font-size: 1.1rem;
}

.rank.show {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.rank.first { color: gold; font-size: 1.4rem; }
.rank.second { color: silver; }
.rank.third { color: #cd7f32; }
</style>
</head>

<body>
<div class="snow"></div>

<div class="game-container">
  <h1>ğŸ„ Christmas Flip & Match ğŸ„</h1>
  <h2>3 Player Edition</h2>

  <div class="scoreboard">
    <div class="player active">Player 1: <span>0</span></div>
    <div class="player">Player 2: <span>0</span></div>
    <div class="player">Player 3: <span>0</span></div>
  </div>

  <div class="grid" id="grid"></div>
  <button onclick="restartGame()">Restart</button>
</div>

<div class="winner-screen hidden" id="winnerScreen">
  <div class="winner-box">
    <h2>ğŸ† Final Results</h2>
    <div class="podium">
      <div class="rank first" id="rank1">ğŸ¥‡</div>
      <div class="rank second" id="rank2">ğŸ¥ˆ</div>
      <div class="rank third" id="rank3">ğŸ¥‰</div>
    </div>
    <button onclick="restartGame()">Play Again ğŸ</button>
  </div>
</div>

<script>
const grid = document.getElementById("grid");
const playersUI = document.querySelectorAll(".player");
const winnerScreen = document.getElementById("winnerScreen");

const emojis = ["ğŸ„","ğŸ","â­","â›„","ğŸ””","ğŸª","ğŸ•¯ï¸","ğŸ¦Œ"];
let cards, flipped = [], lock = false;
let scores = [0,0,0];
let player = 0;
let matches = 0;

function shuffle(a){ return a.sort(()=>Math.random()-0.5); }

function createBoard(){
  grid.innerHTML="";
  cards = shuffle([...emojis,...emojis]);
  matches = 0;
  flipped = [];
  lock = false;

  cards.forEach(e=>{
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`<div class="card-inner">
      <div class="card-face card-front">â„</div>
      <div class="card-face card-back">${e}</div>
    </div>`;
    c.onclick=()=>flip(c,e);
    grid.appendChild(c);
  });
}

function flip(card,emoji){
  if(lock||card.classList.contains("flip"))return;
  card.classList.add("flip");
  flipped.push({card,emoji});
  if(flipped.length===2)check();
}

function check(){
  lock=true;
  const [a,b]=flipped;
  if(a.emoji===b.emoji){
    scores[player]++;
    updateScores();
    matches++;
    flipped=[];
    lock=false;
    if(matches===emojis.length)showResults();
  } else {
    setTimeout(()=>{
      a.card.classList.remove("flip");
      b.card.classList.remove("flip");
      flipped=[];
      nextPlayer();
      lock=false;
    },900);
  }
}

function nextPlayer(){
  playersUI[player].classList.remove("active");
  player=(player+1)%3;
  playersUI[player].classList.add("active");
}

function updateScores(){
  playersUI.forEach((p,i)=>p.querySelector("span").textContent=scores[i]);
}

function showResults(){
  winnerScreen.classList.remove("hidden");

  const ranking = scores
    .map((s,i)=>({player:i+1,score:s}))
    .sort((a,b)=>b.score-a.score);

  const r1=document.getElementById("rank1");
  const r2=document.getElementById("rank2");
  const r3=document.getElementById("rank3");

  r1.textContent=`ğŸ¥‡ Player ${ranking[0].player} â€” ${ranking[0].score} pts`;
  r2.textContent=`ğŸ¥ˆ Player ${ranking[1].player} â€” ${ranking[1].score} pts`;
  r3.textContent=`ğŸ¥‰ Player ${ranking[2].player} â€” ${ranking[2].score} pts`;

  [r1,r2,r3].forEach(r=>r.classList.remove("show"));

  setTimeout(()=>r1.classList.add("show"),300);
  setTimeout(()=>r2.classList.add("show"),800);
  setTimeout(()=>r3.classList.add("show"),1300);
}

function restartGame(){
  scores=[0,0,0];
  updateScores();
  playersUI.forEach(p=>p.classList.remove("active"));
  player=0;
  playersUI[0].classList.add("active");
  winnerScreen.classList.add("hidden");
  createBoard();
}

createBoard();
</script>
</body>
</html>
